

<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="initial-scale=1.0, user-scalable=yes" />
        <title>HABSIM</title>
         <style type="text/css">
 		html { height: 100% }
	      body { height: 100%; margin: 0; padding: 0 }
		
		 #info {
        position: absolute;
        width:20%;
        height:100%;
        overflow-y: scroll;
        overflow-x: scroll;
        bottom:0px;
        right:0px;
        top:0px;
        background-color: white;
        border-left:1px #666 solid;
        font-family:Helvetica; }
            
		#map{
                height: 100%;
                width: 100%;
                margin: 0;
                padding: 0;
            }
  
        </style> 
    </head>
    <body>
        <div id="map" style="float: left;"></div>       
        
        
        <!-- bring in the google maps library -->
        <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
        
        <script type="text/javascript">
            //Google maps API initialisation
            var element = document.getElementById("map");
 
            var map = new google.maps.Map(element, {
                center: new google.maps.LatLng(35.0,-122.0
 ),
                zoom: 9,
                mapTypeId: "OSM",
              
            });


            google.maps.event.addListener(map, 'click', function (event) {
              displayCoordinates(event.latLng);               
            });

            function displayCoordinates(pnt) {

                var lat = pnt.lat();
                lat = lat.toFixed(4);
                var lng = pnt.lng();
                lng = lng.toFixed(4);


                document.getElementById("lat").value = lat;

                document.getElementById("lon").value = lng;


            }
 
            //Define OSM map type pointing at the OpenStreetMap tile server
            map.mapTypes.set("OSM", new google.maps.ImageMapType({
                getTileUrl: function(coord, zoom) {
                    // "Wrap" x (longitude) at 180th meridian properly
                    // NB: Don't touch coord.x: because coord param is by reference, and changing its x property breaks something in Google's lib
                  var tilesPerGlobe = 1 << zoom;
                    var x = coord.x % tilesPerGlobe;
                    if (x < 0) {
                        x = tilesPerGlobe+x;
                    }
                    // Wrap y (latitude) in a like manner if you want to enable vertical infinite scrolling

                    return "https://tile.openstreetmap.org/" + zoom + "/" + x + "/" + coord.y + ".png";
                },
                tileSize: new google.maps.Size(256, 256),
                name: "OpenStreetMap",
                maxZoom: 18
            }));




var marker = new google.maps.Marker({
                position: {lat: 35.0022348789, lng: -121.995457799},
                label: "  ",
                title:" 0.0,2018-01-01 00:00:00 "
            });
            // To add the marker to the map, call setMap();
            marker.setMap(map);
        
var flightPlanCoordinates0 = [ 
{lat: 35.0, lng: -122.0},
{lat: 35.0005642738, lng: -121.998851103},
{lat: 35.0011248589, lng: -121.997711173},
{lat: 35.0016817342, lng: -121.996580107},
{lat: 35.0022348789, lng: -121.995457799},

        ];
        var flightPath0 = new google.maps.Polyline({
          path: flightPlanCoordinates0,
          geodesic: true,
          strokeColor: '#FF0000',
          strokeOpacity: 1.0,
          strokeWeight: 2
        });

        flightPath0.setMap(map);
var flightPlanCoordinates1 = [ 
{lat: 35.0022348789, lng: -121.995457799},

        ];
        var flightPath1 = new google.maps.Polyline({
          path: flightPlanCoordinates1,
          geodesic: true,
          strokeColor: '#008000',
          strokeOpacity: 1.0,
          strokeWeight: 2
        });

        flightPath1.setMap(map);
var flightPlanCoordinates2 = [ 
{lat: 35.0022348789, lng: -121.995457799},

        ];
        var flightPath2 = new google.maps.Polyline({
          path: flightPlanCoordinates2,
          geodesic: true,
          strokeColor: '#000000',
          strokeOpacity: 1.0,
          strokeWeight: 2
        });

        flightPath2.setMap(map);

        </script>
    <div id="map_canvas" style="width:80%; height:100%"></div>
    <div id="info" style="padding-left:2ch; padding-right: 2ch">

      <div>
        <h2>Launch a balloon from the past.</h2>
        Date range supported: 2018, all timestamps. <br/>
        Locations supported: NW quadrant.<br/>
        <form>
        Lat: <input id="lat" type="text" size="8" name="lat"> <br/>
        Lon: <input id="lon" type="text" size="8" name="lon"> <br/>
        Click to select coordinates. <br/></br>
        
        If your launch location is in the continental US, the launch altitude will be the ground elevation. Otherwise, it will be 0m. <br/><br/>
            Date: <input id = "y" type="text" size="2" name="y">/<input id = "mo" type="text" size="1" name="mo">/<input id = "d" type="text" size="1" name="d"> (yyyy/mm/dd) <br/>
            Time (UTC): <input id = "h" type="text" size="1" name="h">:<input id = "mi" type="text" size="1" name="mi"><br/>
            <br/>
            Time variability: <input id = "tn" type = "text" size = "1" name = "tn"> neighbors on each side. <br/> 
            Interval <input id = "ti" type = "text" size = "1" name = "ti"> hours.<br/> <br/> 
            
            Ascent rate: <input id="asc" type="text" size="2" name="asc"> &pm; <input id="var" type="text" size="1" name="var"> m/s with
            <input id = "an" type = "text" size = "1" name = "an"> neighbors on each side, normally distributed. <br/>
            <br/>
            Stop alt: <input id = "alt" type = "text" size = "4" name = "alt">m <br/><br/>
            
            Descent rate: <input id = "desc" type = "text" size = "2" name = "desc">m/s<br/><br/>

            Simulate for <input id = "max_h" type = "text" size = "2" name = "max_h"> hours. <br/><br/>
            
            Step: <input id="step" type="text" size="4" name="step">s <br/>
	    <button formaction="https://web.stanford.edu/~bjing/cgi-bin/hist_batch.php" method = "get">Simulate</button>
	    </form>
        <br/><br/>
        Output: <br/>

Launch 2018-01-01 00:00:00 ascent 0.00<br/><br/>
00:00:00Alt=0,Loc=35.00000,-122.00000,u=0.000,v=0.000<br>
00:01:40Alt=0,Loc=35.00056,-121.99885,u=1.046,v=0.627<br>
00:03:20Alt=0,Loc=35.00112,-121.99771,u=1.038,v=0.623<br>
00:05:00Alt=0,Loc=35.00168,-121.99658,u=1.030,v=0.619<br>
00:06:40Alt=0,Loc=35.00223,-121.99546,u=1.022,v=0.615<br>
<br/><br/>


      </div>
    </div>
    
<script>
    document.getElementById("lat").value = 35.0000;
    document.getElementById("lon").value = -122.0000;
    document.getElementById("y").value = 2018;
    document.getElementById("mo").value = 1;
    document.getElementById("d").value = 1;
    document.getElementById("h").value = 0;
    document.getElementById("mi").value = 0;
    document.getElementById("tn").value = 0;
    document.getElementById("ti").value = 0.0;
    document.getElementById("asc").value = 0.0;
    document.getElementById("var").value = 120.0;
    document.getElementById("an").value = 0;
    document.getElementById("alt").value = 29000.0;
    document.getElementById("desc").value = 0.0;
    document.getElementById("max_h").value = 0.1;
    document.getElementById("step").value = 100.0;
    </script>

</body>
</html>


